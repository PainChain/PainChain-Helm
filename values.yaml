# Default values for painchain
# This mirrors the docker-compose.yml setup

# Global settings
global:
  imagePullPolicy: IfNotPresent

# PostgreSQL Database
postgresql:
  enabled: true
  image:
    repository: postgres
    tag: "16-alpine"
  auth:
    database: painchain
    username: painchain
    password: changeme  # Override this in production
  primary:
    persistence:
      enabled: true
      size: 8Gi
    resources:
      requests:
        memory: 256Mi
        cpu: 100m

# Redis
redis:
  enabled: true
  image:
    repository: redis
    tag: "7-alpine"
  resources:
    requests:
      memory: 128Mi
      cpu: 50m

# API Service
api:
  enabled: true
  replicaCount: 1
  image:
    repository: ghcr.io/painchain/painchain-api
    tag: latest
  service:
    type: ClusterIP
    port: 8000
  env:
    REDIS_URL: "redis://painchain-redis:6379/0"
  resources:
    requests:
      memory: 512Mi
      cpu: 250m

# Celery Worker
celeryWorker:
  enabled: true
  replicaCount: 1
  image:
    repository: ghcr.io/painchain/painchain-api
    tag: latest
  env:
    REDIS_URL: "redis://painchain-redis:6379/0"
  resources:
    requests:
      memory: 512Mi
      cpu: 250m

# Celery Beat (Scheduler)
celeryBeat:
  enabled: true
  replicaCount: 1
  image:
    repository: ghcr.io/painchain/painchain-api
    tag: latest
  env:
    REDIS_URL: "redis://painchain-redis:6379/0"
  resources:
    requests:
      memory: 256Mi
      cpu: 100m

# Frontend
frontend:
  enabled: true
  replicaCount: 1
  image:
    repository: ghcr.io/painchain/painchain-frontend
    tag: latest
  service:
    type: ClusterIP
    port: 5173
  env:
    VITE_API_URL: "http://localhost:8000"
  resources:
    requests:
      memory: 256Mi
      cpu: 100m

# Ingress configuration (optional)
ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: painchain.local
      paths:
        - path: /
          pathType: Prefix
          service: frontend
        - path: /api
          pathType: Prefix
          service: api
  tls: []
